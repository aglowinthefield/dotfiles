# ~/.gitconfig (managed by chezmoi)

[user]
    # Personal identity (default)
    name = aglowinthefield
    email = 146008217+aglowinthefield@users.noreply.github.com
    signingkey = ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIEu7PGIiUMTrrk1KhsAUZPgRNPCfLg5sSsYlNwSo4sho

[commit]
    # Always sign commits unless overridden
    gpgsign = true

[gpg]
    # Use SSH signing (1Password)
    format = ssh

[gpg "ssh"]
  {{ if eq .chezmoi.os "windows" }}
  program = "~/AppData/Local/Microsoft/WindowsApps/op-ssh-sign.exe"
  {{ else if eq .chezmoi.os "darwin" }}
  program = "/Applications/1Password.app/Contents/MacOS/op-ssh-sign"
  {{ else }}
  program = ssh-keygen
  {{ end }}

# ---- Work identity overrides below ----
# Any repo under ~/dev/ will use ~/.gitconfig_work
[includeIf "gitdir:~/dev/"]
    path = ~/.gitconfig_work

[init]
    defaultBranch = main

[pull]
    rebase = false

[push]
    default = current

[color]
    ui = auto

[core]
  {{ if eq .chezmoi.os "windows" }}
  autocrlf = true
  whitespace = cr-at-eol
  sshCommand = "C:/Windows/System32/OpenSSH/ssh.exe"
  {{ end }}
